_format_version: '1.1'
consumers:
- username: anon
  keyauth_credentials:
  - key: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlzcyI6InN1cGFiYXNlLXNlbGYtaG9zdGVkIiwiaWF0IjoxNzcwMjkzNjQ0LCJleHAiOjIwODU2NTM2NDR9.3P9WoGpqksExyyPmk2teZACt_xWZIkxiRs76xdTtN5U
- username: service_role
  keyauth_credentials:
  - key: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoic2VydmljZV9yb2xlIiwiaXNzIjoic3VwYWJhc2Utc2VsZi1ob3N0ZWQiLCJpYXQiOjE3NzAyOTM2NDQsImV4cCI6MjA4NTY1MzY0NH0.xmrryWd_pP-0AbxV3kPInHMQHTyLz5AUrW1DDJ3W0DM
acls:
- consumer: anon
  group: anon
- consumer: service_role
  group: admin
services:
- name: auth-v1-open
  url: http://supabase-auth:9999/verify
  routes:
  - name: auth-v1-open
    strip_path: true
    paths:
    - /auth/v1/verify
  plugins:
  - name: cors
- name: auth-v1-open-callback
  url: http://supabase-auth:9999/callback
  routes:
  - name: auth-v1-open-callback
    strip_path: true
    paths:
    - /auth/v1/callback
  plugins:
  - name: cors
- name: auth-v1-open-authorize
  url: http://supabase-auth:9999/authorize
  routes:
  - name: auth-v1-open-authorize
    strip_path: true
    paths:
    - /auth/v1/authorize
  plugins:
  - name: cors
- name: auth-v1
  url: http://supabase-auth:9999/
  routes:
  - name: auth-v1-all
    strip_path: true
    paths:
    - /auth/v1/
  plugins:
  - name: cors
  - name: key-auth
    config:
      hide_credentials: false
  - name: acl
    config:
      hide_groups_header: true
      allow:
      - admin
      - anon
      - authenticated
      - service_role
- name: rest-v1
  url: http://supabase-rest:3000/
  routes:
  - name: rest-v1-all
    strip_path: true
    paths:
    - /rest/v1/
  plugins:
  - name: cors
  - name: key-auth
    config:
      hide_credentials: true
  - name: acl
    config:
      hide_groups_header: true
      allow:
      - admin
      - anon
      - authenticated
- name: realtime-v1
  url: http://realtime-dev.supabase-realtime:4000/socket/
  routes:
  - name: realtime-v1-all
    strip_path: true
    paths:
    - /realtime/v1/
  plugins:
  - name: cors
  - name: key-auth
    config:
      hide_credentials: false
  - name: acl
    config:
      hide_groups_header: true
      allow:
      - admin
- name: storage-v1
  url: http://supabase-storage:5000/
  routes:
  - name: storage-v1-all
    strip_path: true
    paths:
    - /storage/v1/
  plugins:
  - name: cors
- name: meta
  url: http://supabase-meta:8080/
  routes:
  - name: meta-all
    strip_path: true
    paths:
    - /pg/
  plugins:
  - name: key-auth
    config:
      hide_credentials: false
  - name: acl
    config:
      hide_groups_header: true
      allow:
      - admin
- name: functions-v1-open-auth-relay
  url: http://supabase-functions:9000/auth-relay
  routes:
  - name: functions-v1-open-auth-relay
    strip_path: true
    paths:
    - /functions/v1/auth-relay
  plugins:
  - name: cors
- name: functions-v1
  url: http://supabase-functions:9000/
  routes:
  - name: functions-v1-all
    strip_path: true
    paths:
    - /functions/v1/
  plugins:
  - name: cors
  - name: key-auth
    config:
      hide_credentials: false
  - name: acl
    config:
      hide_groups_header: true
      allow:
      - admin
      - anon
      - authenticated
      - service_role
